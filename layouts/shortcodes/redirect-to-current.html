{{ $languages := .Site.Data.versions.languages }}
{{ $baseUrl := urls.Parse .Site.BaseURL }}
{{ $rootPath := path.Clean $baseUrl.Path }}
{{ if or (eq $rootPath ".") (eq $rootPath "/") }}
  {{ $rootPath = "" }}
{{ end }}
{{ $redirectUrl := "/versions/" }}

{{/* Find current language and current version */}}
{{ range $languages }}
  {{ if .current }}
    {{ range .versions }}
      {{ if .current }}
        {{ $redirectUrl = printf "%s%s" $rootPath .url }}
      {{ end }}
    {{ end }}
  {{ end }}
{{ end }}

<script>
  // Redirect to current language/version
  window.location.href = "{{ $redirectUrl }}";
</script>

<noscript>
  <meta http-equiv="refresh" content="0; url={{ $redirectUrl }}">
  <p>Redirecting to <a href="{{ $redirectUrl }}">current version</a>...</p>
</noscript>